angular.module("mainCtrl",[]).controller("mainController",["$location","$scope",function(a,b){b.name="GLIFRP"}]),angular.module("mapCtrl",[]).controller("mapController",["$location","$scope",function(a,b){console.log("here")}]),function(){var a=new L.featureGroup,b=angular.module("GLIFRP",["ngRoute","mainCtrl","mapCtrl"]);b.config(["$httpProvider","$routeProvider","$locationProvider",function(a,b,c,d){}]),b.run(function(){function b(a){return a.match(/[a-z]/i)?"STATE":"NUMBER"}$("#search-box").keyup(function(c){if(13==c.keyCode){$("#menu").slideUp(40).css({"tab-index":-1});var d=$("#search-box").val().split(","),e=function(a){var b=a.target.obj;setData("#stat-bar",b.crime/500);var c="<h3 style='color:black'>"+b.name+", "+b.uState+"</h3><strong>Population:</strong>"+b.population;c=c+"<br/><strong>Longitude:</strong>"+b.lon,c=c+"<br/><strong>Lattitude:</strong>"+b.lat,c=c+"<br/><strong>Overall Score:</strong>"+parseInt(b.score),$("#info-popup-content").html(c)},f=function(b){for(var c=JSON.parse(b),d=0;d<c.length;d++){var f=c[d];f.crime=f.score;var g="<h3 style='color:black'>"+f.name+", "+f.uState+"</h3>";g=g+"<br/><strong>Violent Crime:</strong>"+parseInt(f.violentCrime),g=g+"<br/><strong>Burglary:</strong>"+parseInt(f.burglary),g=g+"<br/><strong>Larceny:</strong>"+parseInt(f.larceny),g=g+"<br/><strong>Rape:</strong>"+parseInt(f.rape),g=g+"<br/><strong>Motor:</strong>"+parseInt(f.motor),g=g+"<br/><strong>Arson:</strong>"+parseInt(f.arson);var h=L.marker([f.lat,f.lon]).bindPopup(g).addTo(map);h.obj=f,h.on("click",e),a.addLayer(h),$("#loading").css({display:"none"})}map.fitBounds(a.getBounds().pad(.5))};a.eachLayer(function(a){map.removeLayer(a)}),a.clearLayers();var g,h="<h3 style='color:black'></h3><strong>No Info</strong>";if($("#loading").css({display:"flex"}),2==d.length){if("STATE"!=b(d[1]))return void $.ajax({url:"/search",type:"POST",data:'{"count":'+d[1].trim()+',"state":"'+d[0].trim()+'","crime":'+window.crime+',"price":'+window.price+',"distance":'+window.distance+"}"}).done(function(a){f(a)});g=10}else{if(1==d.length)return void $.ajax({url:"/search",type:"POST",data:'{"count":10,"state":"'+d[0].trim()+'","crime":'+window.crime+',"price":'+window.price+',"distance":'+window.distance+"}"}).done(function(a){f(a)});g=d[2]}$("#info-popup-content").html(h),$.ajax({url:"/search",type:"POST",data:'{"count":'+g+',"city":"'+d[0].trim()+'","state":"'+d[1].trim()+'","crime":'+window.crime+',"price":'+window.price+',"distance":'+window.distance+"}"}).done(function(a){f(a)})}else window.onInputFocus()})})}();