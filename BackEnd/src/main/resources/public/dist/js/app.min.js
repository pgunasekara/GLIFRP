angular.module("mainCtrl",[]).controller("mainController",["$location","$scope",function(a,b){b.name="GLIFRP"}]),angular.module("mapCtrl",[]).controller("mapController",["$location","$scope",function(a,b){console.log("here")}]),function(){var a=new L.featureGroup,b=angular.module("GLIFRP",["ngRoute","mainCtrl","mapCtrl"]);b.config(["$httpProvider","$routeProvider","$locationProvider",function(a,b,c,d){}]),b.run(function(){function b(a){return a.match(/[a-z]/i)?"STATE":"NUMBER"}$("#search-box").keyup(function(c){if(13==c.keyCode){$("#menu").slideUp(40).css({"tab-index":-1});var d=$("#search-box").val().split(","),e=function(a){var b=a.target.obj;setData("#stat-bar",b.crime);var c="<h3 style='color:black'>"+b.city+", "+b.state+"</h3><strong>Population:</strong>"+b.population;c=c+"<br/><strong>Longitude:</strong>"+b.lon,c=c+"<br/><strong>Lattitude:</strong>"+b.lat,$("#info-popup-content").html(c)},f=function(b){for(var c=JSON.parse(b),d=0;d<c.length;d++){var f=c[d];f.crime=f.violentCrime/100;var g="<h3 style='color:black'>"+f.city+", "+f.state+"</h3>";g=g+"<br/><strong>Violent Crime:</strong>"+parseInt(f.violentCrime),g=g+"<br/><strong>Burglary:</strong>"+parseInt(f.burglary),g=g+"<br/><strong>Larceny:</strong>"+parseInt(f.larceny),g=g+"<br/><strong>Rape:</strong>"+parseInt(f.rape),g=g+"<br/><strong>Motor:</strong>"+parseInt(f.motor),g=g+"<br/><strong>Arson:</strong>"+parseInt(f.arson);var h=L.marker([f.lat,f.lon]).bindPopup(g).addTo(map);h.obj=f,h.on("click",e),a.addLayer(h)}map.fitBounds(a.getBounds().pad(.5))};a.eachLayer(function(a){map.removeLayer(a)}),a.clearLayers();var g="<h3 style='color:black'></h3><strong>No Info</strong>";$("#info-popup-content").html(g),"NUMBER"==b($("#search-box").val())?$.ajax({url:"/search",type:"POST",data:'{"count":'+d[0]+"}"}).done(function(a){f(a)}):$.ajax({url:"/searchLCMByState",type:"POST",data:'{"count":'+d[0]+',"state":"'+d[1].trim()+'"}'}).done(function(a){console.log(a),f(a)})}})})}();